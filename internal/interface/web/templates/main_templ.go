// Code generated by templ - DO NOT EDIT.

// templ: version: v0.2.793
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"github.com/ArkLabsHQ/ark-node/internal/core/domain"
)

func runOnLoad() templ.ComponentScript {
	return templ.ComponentScript{
		Name: `__templ_runOnLoad_040f`,
		Function: `function __templ_runOnLoad_040f(){updateFiatValues()
	//
	document.querySelectorAll('select').forEach((x) => {
		// hack, or else select will not have current value selected
		if (x.getAttribute('value')) x.value = x.getAttribute('value')
	})
  // check for bitcoin unit (btc or sat)
	const settings = JSON.parse(document.querySelector('#settings').textContent)
	if (settings.Unit !== "sat") toggleUnit()
}`,
		Call:       templ.SafeScript(`__templ_runOnLoad_040f`),
		CallInline: templ.SafeScriptInline(`__templ_runOnLoad_040f`),
	}
}

func Layout(bodyContent templ.Component, settings domain.Settings) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<!doctype html><html lang=\"en\"><head><title>Ark node</title><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"><meta name=\"keywords\" content=\"Ark\"><meta name=\"description\" content=\"Ark node frontend\"><meta name=\"theme-color\" content=\"#FEFEF5\"><link rel=\"dns-prefetch\" href=\"//fonts.googleapis.com\"><link rel=\"dns-prefetch\" href=\"//fonts.gstatic.com\"><link rel=\"preconnect\" href=\"//fonts.googleapis.com\" crossorigin><link rel=\"preconnect\" href=\"//fonts.gstatic.com\" crossorigin><link rel=\"preload\" href=\"/static/Switzer-Variable.17d61fe9.woff2\" as=\"font\" type=\"font/woff2\" crossorigin><link rel=\"preload\" href=\"/static/Switzer-Variable.f14a5147.woff\" as=\"font\" type=\"font/woff\" crossorigin><link rel=\"preload\" href=\"/static/Switzer-Variable.398e4d30.ttf\" as=\"font\" type=\"font/ttf\" crossorigin><link rel=\"manifest\" href=\"/static/manifest.webmanifest\"><link rel=\"apple-touch-icon\" href=\"/static/apple-touch-icon.png\"><link rel=\"shortcut icon\" href=\"/static/favicon.ico\" type=\"image/x-icon\"><link rel=\"icon\" href=\"/static/favicon.svg\" type=\"image/svg+xml\"><link rel=\"icon\" href=\"/static/favicon.png\" sizes=\"any\"><link href=\"/static/styles.css\" rel=\"stylesheet\"></head>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templ.RenderScriptItems(ctx, templ_7745c5c3_Buffer, runOnLoad())
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<body onload=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 templ.ComponentScript = runOnLoad()
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ_7745c5c3_Var2.Call)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templ.JSONScript("settings", settings).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("<div id=\"app\"><div id=\"toast\"></div><div id=\"modal\"></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = bodyContent.Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString("</div><script src=\"/static/decimal.js\"></script><script src=\"/static/scripts.js\"></script></body><script>\n\t\tconst toastTimeout = 2100\n\n\t\tconst disableButton = (button) => {\n\t\t\tbutton.classList.add(\"disabled\")\n\t\t}\n\n\t\t// re enable buttons after receiving a htmx:load event\n\t\tconst enableButtons = () => {\n\t\t\tdocument.querySelectorAll('.disabled').forEach((x) => {\n\t\t\t\tx.classList.remove('disabled')\n\t\t\t})\n\t\t}\n\n\t\tconst prettyNum = (num, maximumFractionDigits = 2) => {\n\t\t\tif (!num) return '0'\n\t\t\treturn new Intl.NumberFormat('en', {\n\t\t\t\tstyle: 'decimal',\n\t\t\t\tmaximumFractionDigits,\n\t\t\t}).format(num)\n\t\t}\n\n\t\tconst fromSatoshis = (sats) => {\n\t\t\treturn Decimal.div(sats, 100_000_000).toNumber()\n\t\t}\n\n\t\tconst toSatoshis = (btc) => {\n\t\t\treturn Decimal.mul(btc, 100_000_000).toNumber()\n\t\t}\n\n\t\tconst redirect = (path) => {\n\t\t\tconst url = new URL(window.location.href)\n\t\t\tconst params = new URLSearchParams(url.search);\n\t\t\tconst serverurl = params.get('serverurl')\n\t\t\twindow.location.href = path + (serverurl ? `/?serverurl=${serverurl}` : '')\n\t\t}\n\n\t\tconst copyToClipboard = (id) => {\n\t\t\tif (!navigator.clipboard) return\n\t\t\tconst addr = document.querySelector(id).innerText\n\t\t\tnavigator.clipboard.writeText(addr)\n\t\t}\n\n\t\tconst pasteFromClipboard = (id) => {\n\t\t\tif (navigator.clipboard) {\n\t\t\t\tnavigator.clipboard.readText().then((addr) => {\n\t\t\t\t\tdocument.querySelector(id).value = addr\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tconst setMaxValue = (val = 0) => {\n\t\t\tconst sats = val || document.querySelector('#amount').getAttribute('max')\n\t\t\tif (isNaN(sats)) return\n\t\t\tconst unit = document.querySelector('#unit').innerText\n\t\t\tdocument.querySelector('#sats').value = sats\n\t\t\tdocument.querySelector('#amount').value = unit === 'SATS' ? sats : fromSatoshis(sats)\n\t\t\tdocument.querySelector('#amount').dispatchEvent(new Event('change'))\n\t\t}\n\n\t\t// change between btc and sat\n\t\tconst toggleUnit = () => {\n\t\t\tconst unit = document.querySelector('#unit')\n\t\t\tif (!unit) return\n\t\t\tconst currUnit = unit.innerText\n\t\t\tconst nextUnit = currUnit === 'SATS' ? 'BTC' : 'SATS'\n\t\t\t// change unit\n\t\t\tif (unit) unit.innerText = nextUnit\n\t\t\t// change availability\n\t\t\tconst available = document.querySelector('#available')\n\t\t\tif (available) {\n\t\t\t\tconst maxSats = document.querySelector('#amount').getAttribute('max')\n\t\t\t\tconst num = !maxSats ? 0 : (nextUnit === 'SATS' ? prettyNum(maxSats) : fromSatoshis(maxSats))\n\t\t\t\tavailable.innerText = `Available ${num} ${nextUnit}`\n\t\t\t}\n\t\t\t// change value inside input\n\t\t\tconst currVal = document.querySelector('#amount').value\n\t\t\tif (currVal) {\n\t\t\t\tconst nextVal = nextUnit === 'SATS' ? toSatoshis(currVal) : fromSatoshis(currVal)\n\t\t\t\tdocument.querySelector('#amount').value = nextVal\n\t\t\t}\n\t\t\t// change steps\n\t\t\tdocument.querySelector('#amount').step = nextUnit === 'SATS' ? \"\" : \"0.00000001\"\n\t\t}\n\n\t\t// hide/show input password visibility\n\t\tconst togglePasswordVisibility = () => {\n\t\t\tdocument.querySelectorAll(\".eyes span\").forEach((el) => {\n\t\t\t\tel.style.display = el.style.display === 'none' ? 'block' : 'none'\n\t\t\t})\n\t\t\tdocument.querySelectorAll(\".eyeopener\").forEach((el) => {\n\t\t\t\tel.type = el.type === 'text' ? 'password' : 'text'\n\t\t\t})\n\t\t}\n\n\t\t// this function finds every crypto amount in the dom and make it use\n\t\t// the preferred unit choosen in settings: sats or btc\n\t\tconst updateCryptoValues = () => {\n\t\t\tconst settings = JSON.parse(document.querySelector('#settings').textContent)\n\t\t\tdocument.querySelectorAll('.cryptoAmount').forEach((x) => {\n\t\t\t\tconst sats = parseInt(x.getAttribute('sats'))\n\t\t\t\tif (isNaN(sats)) return\n\t\t\t\tconst suffix = settings.Unit === 'sat' ? 'SATS' : 'BTC'\n\t\t\t\tconst cryptoValue = settings.Unit === 'sat' ? sats : fromSatoshis(sats)\n\t\t\t\tx.innerHTML = `${prettyNum(cryptoValue, 8)} ${suffix}`\n\t\t\t})\n\t\t}\n\n\t\t// this function finds every fiat amount in the dom and checks live\n\t\t// rate of the preferred currency choosen in setttings: usd or euro\n\t\tconst updateFiatValues = () => {\n\t\t\tconst settings = JSON.parse(document.querySelector('#settings').textContent)\n\t\t\tfetch('https://blockchain.info/ticker').then((res) => {\n\t\t\t\tres.json().then((json) => {\n\t\t\t\t\tconsole.log('settings.Currency', settings.Currency)\n\t\t\t\t\tconsole.log('ticker', json)\n\t\t\t\t\tdocument.querySelectorAll('.fiatAmount').forEach((x) => {\n\t\t\t\t\t\tconst sats = parseInt(x.getAttribute('sats'))\n\t\t\t\t\t\tif (isNaN(sats)) return\n\t\t\t\t\t\tconst prefix = settings.Currency === 'eur' ? 'â‚¬' : '$'\n\t\t\t\t\t\tconst fiatValue = (sats * json[settings.Currency.toUpperCase()]?.last) / 100_000_000\n\t\t\t\t\t\tx.innerHTML = `${prefix} ${prettyNum(fiatValue)}`\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\n\t\tconst notImplemented = (event) => {\n\t\t\tevent.preventDefault()\n\t\t\tdocument.querySelector(\"#toast\").innerHTML = '<p class=\"border border-1 border border-red/20 bg-errorbg capitalize text-red px-2 py-1 rounded-md mx-auto\">Not implemented</p>'\n\t\t\tsetTimeout(() => document.querySelector(\"#toast\").innerHTML = \"\", toastTimeout)\n\t\t}\n\n\t\tdocument.addEventListener('htmx:load', () => {\n\t\t\tconsole.log('heyhey')\n\t\t\tenableButtons()\n\t\t\tupdateFiatValues()\n\t\t\tupdateCryptoValues()\n\n\t\t\t// pass along query parameter with serverurl\n\t\t\tconst url = new URL(window.location.href)\n\t\t\tconst params = new URLSearchParams(url.search);\n\t\t\tconst serverurl = params.get('serverurl')\n\t\t\tif (serverurl) {\n\t\t\t\tconst hiddenInput = document.querySelector(\"#serverurl\")\n\t\t\t\tif (hiddenInput) hiddenInput.value = serverurl\n\t\t\t}\n\t\t})\n\n\t\t// after receiving a toast, delete it after 2 seconds\n\t\tdocument.body.addEventListener(\"toast\", (e) => {\n\t\t\tsetTimeout(() => document.querySelector(\"#toast\").innerHTML = \"\", toastTimeout)\n\t\t})\n\t</script></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return templ_7745c5c3_Err
	})
}

var _ = templruntime.GeneratedTemplate
